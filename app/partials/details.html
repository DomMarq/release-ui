<div ng-controller="DetailsController">

  <nav id="top-bar" class="navbar sticky-top navbar-light">
    <div class="navbar-header">
      <a id="top-bar-content" class="navbar-brand" href="" ng-click="homePage()">
        <img src="/app/assets/images/logo.png" style="width:20%;">
        <span>ISTIO Releases</span>
      </a>
    </div>
  </nav>

  <main class="container p-5">
    <div id="title" class="row">
      <div class="col-" id = "release-image">
        <img ng-if="release.state == 2" src="/app/assets/images/check.png">
        <img ng-if="release.state == 3" src="/app/assets/images/error.png">
        <img ng-if="release.state == 1" src="/app/assets/images/pending.png">
        <img ng-if="release.state == 4" src="/app/assets/images/suspended.png">
      </div>
      <div class="col-xl-">
        <h1 id="detail_release_title"> {{ release.name }} </h1>
      </div>
    </div>

    <div style="float:right;">
      <a href="{{release.repo_url}}"><button type="button" class="btn btn-primary btn-lg">View on Github</button></a>
    </div>

    <div class="row" id="labels">
      <button ng-repeat="tag in release.labels "type="button" class="btn btn-secondary btn-sm {{tag}}">
        {{tag}}
      </button>
    </div>

    <div id="dates">
      <div class="row">
        <div class="col">
          <h6>Created on: {{release.started * 1000 | date:'medium'}}</h6>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <h6>Last Modified: {{release.last_modified * 1000 | date:'medium'}}</h6>
        </div>
      </div>
    </div>


    <div id="detail-table">
      <table class="table table-striped">
        <thead>
          <th>Status</th>
          <th>Task</th>
          <th>Start Time</th>
          <th>Last Modified</th>
          <th>View Logs</th>
        </thead>
        <tbody>
            <tr ng-repeat="(name, task) in release.tasks">
              <td>
                <img ng-if="task.status == 2" src="/app/assets/images/check.png">
                <img ng-if="task.status == 3" src="/app/assets/images/error.png">
                <img ng-if="task.status == 1" src="/app/assets/images/pending.png">
                <img ng-if="task.status == 4" src="/app/assets/images/suspended.png">
              </td>
              <td>
                {{ task.task_name }}
              </td>
              <td>
                {{task.started * 1000 | date:'medium'}}
              </td>
              <td>
                {{task.last_modified * 1000 | date:'medium'}}
              </td>
              <td>
                <a href="{{task.log_url}}"> logs </a>
              </td>
            </tr>
        </tbody>

      </table>
    </div>
  </main>
</div>
